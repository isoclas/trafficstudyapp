<div id="scenario-downloads" class="fade-me-in">
    <br>
    <hr class="opacity-10">
    <br>
    {% if scenario.has_merged %}
        <div class="space-y-3">
            <!-- Merged CSV File -->
            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600">
                <div class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="w-8 h-8 shrink-0" id="csv">
                        <path fill="#eee" d="M55 18H42V5a1 1 0 0 0-1-1H13a1 1 0 0 0-1 1v28a1 1 0 0 0 1 1h27v16H13a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h42a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1Z"></path>
                        <rect width="34" height="20" x="8" y="32" fill="#66bb6a" rx="1" ry="1"></rect>
                        <path fill="#e0e0e0" d="m55.71 18.29-14-14A1 1 0 0 0 40 5v14a1 1 0 0 0 1 1h14a1 1 0 0 0 .71-1.71Z"></path>
                        <path fill="#fff" d="M19 43.32h1.8a3.15 3.15 0 0 1-.6 1.52 3.22 3.22 0 0 1-1.2.96 3.86 3.86 0 0 1-1.61.35A3.58 3.58 0 0 1 14.62 45a4.19 4.19 0 0 1-1.08-3 4.29 4.29 0 0 1 1.06-3 3.47 3.47 0 0 1 2.69-1.18A3.52 3.52 0 0 1 20 39a3.43 3.43 0 0 1 .79 1.76H19a1.57 1.57 0 0 0-.59-.88 1.91 1.91 0 0 0-1.1-.31 1.86 1.86 0 0 0-1.49.68 2.66 2.66 0 0 0-.56 1.75 2.6 2.6 0 0 0 .58 1.75 1.88 1.88 0 0 0 1.5.67 1.66 1.66 0 0 0 1.66-1.1zm3.35.3H24a1.37 1.37 0 0 0 1.49 1.08 1.42 1.42 0 0 0 .88-.25.8.8 0 0 0 .33-.67.77.77 0 0 0-.55-.78q-.11 0-1-.3a5.89 5.89 0 0 1-1.78-.7 2 2 0 0 1-.82-1.7 2.27 2.27 0 0 1 .75-1.78 2.85 2.85 0 0 1 2-.67 3.15 3.15 0 0 1 2 .62 2 2 0 0 1 .82 1.6h-1.67a1 1 0 0 0-1.13-.78 1.25 1.25 0 0 0-.77.22.71.71 0 0 0-.29.59.65.65 0 0 0 .36.62 5.64 5.64 0 0 0 1.25.36 4.82 4.82 0 0 1 1.58.56 2.17 2.17 0 0 1 1 1.91 2.38 2.38 0 0 1-1.13 2.12 3.41 3.41 0 0 1-1.87.46A3 3 0 0 1 22.83 45a2.9 2.9 0 0 1-.48-1.38zM32.26 46l-3-8h1.79L33 43.4l1.67-5.4h1.75l-2.65 8v"></path>
                    </svg>
                    <div class="flex flex-col">
                        <span class="text-sm font-medium text-gray-900 dark:text-white truncate">
                            Merged CSV
                        </span>
                        <span class="text-xs text-gray-500 dark:text-gray-400">
                            Processed Output
                        </span>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <a href="{{ url_for('api.download_scenario_file', study_id=study_id, scenario_id=scenario.id, file_type='merged') }}" 
                       class="cursor-pointer p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600" 
                       title="Download Merged CSV">
                        <svg class="w-6 h-6 text-gray-400 hover:text-blue-600" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 13V4M7 14H5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2m-1-5-4 5-4-5m9 8h.01"/>
                        </svg>
                    </a>
                </div>
            </div>
            
            {% if scenario.has_attin %}
            <!-- ATTIN TXT File -->
            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600">
                <div class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="w-8 h-8 shrink-0" id="txt">
                        <path fill="#eee" d="M55 18H42V5a1 1 0 0 0-1-1H13a1 1 0 0 0-1 1v28a1 1 0 0 0 1 1h27v16H13a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h42a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1Z"/>
                        <rect width="34" height="20" x="8" y="32" fill="#2196f3" rx="1" ry="1"/>
                        <path fill="#e0e0e0" d="m55.71 18.29-14-14A1 1 0 0 0 40 5v14a1 1 0 0 0 1 1h14a1 1 0 0 0 .71-1.71Z"/>
                        <!-- Proper TXT Text -->
                        <text x="16" y="46" fill="#fff" font-size="10" font-family="Arial, sans-serif" font-weight="bold">TXT</text>
                      </svg>
                    <div class="flex flex-col">
                        <span class="text-sm font-medium text-gray-900 dark:text-white truncate">
                            ATTIN TXT
                        </span>
                        <span class="text-xs text-gray-500 dark:text-gray-400">
                            Configuration File
                        </span>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <a href="{{ url_for('api.download_scenario_file', study_id=study_id, scenario_id=scenario.id, file_type='attin_txt') }}" 
                       class="cursor-pointer p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600" 
                       title="Download ATTIN TXT">
                        <svg class="w-6 h-6 text-gray-400 hover:text-blue-600" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 13V4M7 14H5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2m-1-5-4 5-4-5m9 8h.01"/>
                        </svg>
                    </a>
                </div>
            </div>
            {% endif %}
        </div>
    {% else %}
        <p class="flex justify-center text-gray-500 dark:text-gray-400 mt-3">No output files available.</p>
    {% endif %}
</div>
