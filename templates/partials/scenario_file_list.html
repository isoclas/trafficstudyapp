{# templates/partials/scenario_file_list.html #}
<br>
<div class="uploaded-files-list mb-3 mt-3">
    {% if scenario['uploaded_files'] and scenario['uploaded_files']|length > 0 %}
        <div class="space-y-3">
            {% for file_info in scenario['uploaded_files'] %}
                {% if file_info.is_uploaded %}
                        <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600">
                            <div class="flex items-center gap-3">
                                {% if 'CSV' in file_info.file_type_label.upper() %}
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="w-8 h-8 shrink-0" id="csv">
                                        <path fill="#eee" d="M55 18H42V5a1 1 0 0 0-1-1H13a1 1 0 0 0-1 1v28a1 1 0 0 0 1 1h27v16H13a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h42a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1Z"></path>
                                        <rect width="34" height="20" x="8" y="32" fill="#66bb6a" rx="1" ry="1"></rect>
                                        <path fill="#e0e0e0" d="m55.71 18.29-14-14A1 1 0 0 0 40 5v14a1 1 0 0 0 1 1h14a1 1 0 0 0 .71-1.71Z"></path>
                                        <path fill="#fff" d="M19 43.32h1.8a3.15 3.15 0 0 1-.6 1.52 3.22 3.22 0 0 1-1.2.96 3.86 3.86 0 0 1-1.61.35A3.58 3.58 0 0 1 14.62 45a4.19 4.19 0 0 1-1.08-3 4.29 4.29 0 0 1 1.06-3 3.47 3.47 0 0 1 2.69-1.18A3.52 3.52 0 0 1 20 39a3.43 3.43 0 0 1 .79 1.76H19a1.57 1.57 0 0 0-.59-.88 1.91 1.91 0 0 0-1.1-.31 1.86 1.86 0 0 0-1.49.68 2.66 2.66 0 0 0-.56 1.75 2.6 2.6 0 0 0 .58 1.75 1.88 1.88 0 0 0 1.5.67 1.66 1.66 0 0 0 1.66-1.1zm3.35.3H24a1.37 1.37 0 0 0 1.49 1.08 1.42 1.42 0 0 0 .88-.25.8.8 0 0 0 .33-.67.77.77 0 0 0-.55-.78q-.11 0-1-.3a5.89 5.89 0 0 1-1.78-.7 2 2 0 0 1-.82-1.7 2.27 2.27 0 0 1 .75-1.78 2.85 2.85 0 0 1 2-.67 3.15 3.15 0 0 1 2 .62 2 2 0 0 1 .82 1.6h-1.67a1 1 0 0 0-1.13-.78 1.25 1.25 0 0 0-.77.22.71.71 0 0 0-.29.59.65.65 0 0 0 .36.62 5.64 5.64 0 0 0 1.25.36 4.82 4.82 0 0 1 1.58.56 2.17 2.17 0 0 1 1 1.91 2.38 2.38 0 0 1-1.13 2.12 3.41 3.41 0 0 1-1.87.46A3 3 0 0 1 22.83 45a2.9 2.9 0 0 1-.48-1.38zM32.26 46l-3-8h1.79L33 43.4l1.67-5.4h1.75l-2.65 8v"></path>
                                    </svg>
                                {% elif 'TXT' in file_info.file_type_label.upper() or 'ATTOUT' in file_info.file_type_label.upper() %}
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="w-8 h-8 shrink-0" id="txt">
                                    <path fill="#eee" d="M55 18H42V5a1 1 0 0 0-1-1H13a1 1 0 0 0-1 1v28a1 1 0 0 0 1 1h27v16H13a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h42a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1Z"/>
                                    <rect width="34" height="20" x="8" y="32" fill="#2196f3" rx="1" ry="1"/>
                                    <path fill="#e0e0e0" d="m55.71 18.29-14-14A1 1 0 0 0 40 5v14a1 1 0 0 0 1 1h14a1 1 0 0 0 .71-1.71Z"/>
                                    <!-- Proper TXT Text -->
                                    <text x="16" y="46" fill="#fff" font-size="10" font-family="Arial, sans-serif" font-weight="bold">TXT</text>
                                  </svg>
                                  
                                {% else %}
                                    <svg fill="none" aria-hidden="true" class="w-8 h-8 shrink-0" viewBox="0 0 20 21">
                                        <g clip-path="url(#clip0_3173_1381)">
                                            <path fill="#E2E5E7" d="M5.024.5c-.688 0-1.25.563-1.25 1.25v17.5c0 .688.562 1.25 1.25 1.25h12.5c.687 0 1.25-.563 1.25-1.25V5.5l-5-5h-8.75z"/>
                                            <path fill="#B0B7BD" d="M15.024 5.5h3.75l-5-5v3.75c0 .688.562 1.25 1.25 1.25z"/>
                                            <path fill="#CAD1D8" d="M18.774 9.25l-3.75-3.75h3.75v3.75z"/>
                                            <path fill="#F15642" d="M16.274 16.75a.627.627 0 01-.625.625H1.899a.627.627 0 01-.625-.625V10.5c0-.344.281-.625.625-.625h13.75c.344 0 .625.281.625.625v6.25z"/>
                                            <path fill="#fff" d="M3.998 12.342c0-.165.13-.345.34-.345h1.154c.65 0 1.235.435 1.235 1.269 0 .79-.585 1.23-1.235 1.23h-.834v.66c0 .22-.14.344-.32.344a.337.337 0 01-.34-.344v-2.814zm.66.284v1.245h.834c.335 0 .6-.295.6-.605 0-.35-.265-.64-.6-.64h-.834zM7.706 15.5c-.165 0-.345-.09-.345-.31v-2.838c0-.18.18-.31.345-.31H8.85c2.284 0 2.234 3.458.045 3.458h-1.19zm.315-2.848v2.239h.83c1.349 0 1.409-2.24 0-2.24h-.83zM11.894 13.486h1.274c.18 0 .36.18.36.355 0 .165-.18.3-.36.3h-1.274v1.049c0 .175-.124.31-.3.31-.22 0-.354-.135-.354-.31v-2.839c0-.18.135-.31.355-.31h1.754c.22 0 .35.13.35.31 0 .16-.13.34-.35.34h-1.455v.795z"/>
                                            <path fill="#CAD1D8" d="M15.649 17.375H3.774V18h11.875a.627.627 0 00.625-.625v-.625a.627.627 0 01-.625.625z"/>
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_3173_1381">
                                                <path fill="#fff" d="M0 0h20v20H0z" transform="translate(0 .5)"/>
                                            </clipPath>
                                        </defs>
                                    </svg>
                                {% endif %}
                                <div class="flex flex-col">
                                    <span class="text-sm font-medium text-gray-900 dark:text-white truncate">
                                        {{ file_info.original_name }}
                                    </span>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">
                                        {{ file_info.file_type_label }}
                                    </span>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="text-sm text-gray-500 dark:text-gray-400">
                                    {% if file_info.file_size_formatted %}
                                        {{ file_info.file_size_formatted }}
                                    {% else %}
                                        --
                                    {% endif %}
                                </span>
                                <button class="cursor-pointer p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 file-delete-btn" type="button"
                                        hx-get="{{ url_for('frontend.show_delete_confirmation', 
                                                    message='Are you sure you want to delete ' + file_info.original_name + ' (' + file_info.file_type_label + ')?',
                                                    delete_url=url_for('frontend.delete_scenario_file_interactive', study_id=study_id, scenario_id=scenario['id'], file_type_id=file_info.file_type_id),
                                                    method='post',
                                                    target='#file-upload-and-actions',
                                                    swap='innerHTML') }}"
                                        hx-target="body"
                                        hx-swap="beforeend"
                                        title="Delete file">
                                    <svg class="w-4 h-4 text-gray-400 hover:text-red-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        <p class="text-muted">No file information available.</p>
    {% endif %}
</div>